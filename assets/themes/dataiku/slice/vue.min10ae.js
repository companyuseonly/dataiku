var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function _asyncToGenerator(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){return function n(a,i){try{var u=e[a](i),s=u.value}catch(t){return void r(t)}if(!u.done)return Promise.resolve(s).then(function(t){return n("next",t)},function(t){return n("throw",t)});t(s)}("next")})}}var router=new VueRouter({mode:"history"}),app=new Vue({router:router,el:"#app",data:function(){return{prevpage:null,nextpage:null,currentPage:null,pageNumbers:[],totalPages:0,perPage:12,dataFilterParams:[{category:"",params:[{slug:"",name:""}]}],posts:[],featuredPosts:[],popupData:{},pageType:"",api:"",loading:!1}},watch:{"$route.query":{deep:!0,handler:function(){this.getData()}},currentPage:{deep:!0,handler:function(){if(this.currentPage>1){var t=document.getElementById("app").offsetTop-30;window.scrollTo(0,t)}}}},mounted:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getFilterParams();case 2:return e.next=4,t.getData();case 4:t.openFirstFilter(),setTimeout(function(){t.syncFilter()}),document.getElementById("app").style.opacity=1;case 7:case"end":return e.stop()}},e,t)}))()},computed:{totalPageCount:function(){return parseInt(this.totalPages)},isPagination:function(){return this.totalPages>1},queryWithoutPage:function(){return _.omit(this.$route.query,"page_num")},showFirst:function(){return this.currentPage>=4},showFirstDots:function(){return this.currentPage>=4},showLast:function(){return this.curPage<=this.totalPageCount-3},showLastDots:function(){return this.curPage<=this.totalPageCount-3},curPage:function(){return this.$route.query.page_num?this.$route.query.page_num:1},isFeatured:function(){return!_.values(this.$route.query).some(function(t){return void 0!==t})},isPartners:function(){return"partners"===this.pageType}},methods:{pushQuery:function(t,e,r){var n,a="filter["+e+"]",i=[r];if(t.target.parentElement.classList.add("current-category"),!_.isEmpty(this.$route.query[a])){var u=this.$route.query[a].split(",");_.includes(u,r)?(i=_.remove(u,function(t){return t!==r}),t.target.parentElement.classList.remove("current-category")):i=[].concat(_toConsumableArray(u),[r])}i=i.length>0?i.join():void 0,this.$router.push({query:_extends({},this.$route.query,(n={},_defineProperty(n,a,i),_defineProperty(n,"page_num",void 0),n))})},getData:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var r,n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=_extends({},t.$route.query),_.isEmpty(r)||r.page_num||(r.page_num=1),t.loading=!0,e.prev=3,e.next=6,axios.get(t.api+"wp-json/wp/v2/"+t.pageType,{params:r});case 6:n=e.sent,a=n.data,i=n.headers,t.totalPages=parseInt(i["x-wp-totalpages"]),parseInt(i["x-wp-total"]),t.posts=a,t.setPageNumbers(),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),alert(e.t0),t.$router.push({query:{}});case 19:return e.prev=19,t.loading=!1,e.finish(19);case 22:case"end":return e.stop()}},e,t,[[3,15,19,22]])}))()},getPopupData:function(t,e){_.isEmpty(_.get(e,"type_link.popup",""))||(t.preventDefault(),this.popupData=e.type_link.popup)},getFilterParams:function(){var t=this;return _asyncToGenerator(regeneratorRuntime.mark(function e(){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get(t.api+"wp-json/wp/v2/filter-params?type="+t.pageType);case 2:r=e.sent,n=r.data,t.dataFilterParams=n.filters,t.featuredPosts=n.feature_posts;case 6:case"end":return e.stop()}},e,t)}))()},setType:function(t){this.pageType=t},setApi:function(t){return this.api=t||window.location.origin},getProductLink:function(t){return _.isEmpty(_.get(t,"type_link.external_link"))?_.isEmpty(_.get(t,"type_link.popup"))?!_.isEmpty(_.get(t,"type_link.single_link"))&&t.type_link.single_link:"#":t.type_link.external_link},isPopupClass:function(t){return this.notEmpty(_.get(t,"type_link.popup",""))?"js-popup-link":""},targetPopup:function(t){return this.notEmpty(_.get(t,"type_link.popup",""))?"#popup-window":void 0},blankedLink:function(t){return this.notEmpty(_.get(t,"type_link.external_link",""))?"_blank":void 0},notEmpty:function(t){return!_.isEmpty(t)},compileQueries:function(t){return _extends({},this.queryWithoutPage,t)},setPages:function(t,e){this.prevpage=t>1?t-1:null,this.nextpage=e?t<e?parseInt(t)+1:null:t?parseInt(t)+1:2;var r=6,n=2;(this.showFirst||this.showLast)&&(r=5),this.showFirst&&this.showLast&&(r=4,this.currentPage<this.totalPageCount/2&&(n=1));for(var a=0;a<r;a++){var i=parseInt(t)-n+a;i>0&&i<=e&&this.pageNumbers.push(i)}},setPageNumbers:function(){this.prevpage=null,this.nextpage=null,this.currentPage=null,this.pageNumbers=[];var t=this.curPage;this.currentPage=t,this.setPages(t,this.totalPageCount)},openFirstFilter:function(){window.innerWidth>=1200&&this.notEmpty(this.dataFilterParams)&&(document.getElementsByClassName("filter-block")[0].classList.add("expanded"),document.getElementsByClassName("filter-block")[0].lastChild.style="display: block")},syncFilter:function(){var t,e=this;this.notEmpty(this.queryWithoutPage)&&(t=[],_.map(e.queryWithoutPage,function(e){var r=e.split(",");t=[].concat(_toConsumableArray(t),_toConsumableArray(r))}),_.map(t,function(t){document.getElementById(t).classList.add("current-category")}))},getPostImageStyle:function(t){return"background-image: url("+t.image+")"},getFeaturedStyle:function(t){return"background-image: url("+t.featured_media_src+")"}}});